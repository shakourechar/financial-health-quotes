<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Daily Financial‚ÄëWellness Quote</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- ----------  CSS  ---------- -->
  <style>
    *,::before,::after{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    /* GUARANTEE full transparency behind the card */
    html{background:transparent !important;}
    body{
      background:transparent !important;      /* <- key fix */
      display:flex;justify-content:center;align-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:#e6edf3;line-height:1.5;overflow:hidden;padding:1rem;
    }

    /* -------- 3‚ÄëD quote card -------- */
    #card{
      width:100%;max-width:680px;position:relative;
      background:#21262d;border-radius:18px;padding:2.2rem 2.6rem;
      box-shadow:
        0 1px   1px  rgba(255,255,255,.05) inset,
        0 12px 28px rgba(0,0,0,.45),
        0 6px  14px rgba(0,0,0,.35);
      transform-style:preserve-3d;perspective:1000px;
      opacity:0;transform:rotateX(18deg) translateY(50px) scale(.94);
      animation:cardEntrance .9s cubic-bezier(.25,.8,.25,1) .15s forwards;
    }

    #text{font-size:clamp(1.25rem,2.5vw + .75rem,1.8rem);letter-spacing:.02em}
    #author{margin-top:1.2rem;font-weight:600;color:#58a6ff;font-size:1.05rem}
    #stamp {margin-top:.4rem;font-size:.85rem;color:#8b949e}
    #attr  {margin-top:1.2rem;font-size:.75rem;color:#8b949e}
    #attr a{color:inherit;text-decoration:underline}

    /* -------- button -------- */
    #newBtn{
      margin-top:1.8rem;padding:.65rem 1.4rem;border:none;border-radius:12px;
      background:#58a6ff;color:#0d1117;font-size:1rem;font-weight:600;cursor:pointer;
      transition:transform .15s ease,box-shadow .15s ease;
      box-shadow:0 3px 6px rgba(0,0,0,.25);
    }
    #newBtn:active{transform:scale(.97) translateY(1px)}
    #newBtn:disabled{opacity:.6;cursor:progress}

    @keyframes cardEntrance{
      to{opacity:1;transform:rotateX(0deg) translateY(0) scale(1);}
    }
    @media(max-width:480px){#card{padding:1.8rem 1.4rem}}
  </style>
</head>

<body>
  <div id="card">
    <div id="text">Loading‚Ä¶</div>
    <div id="author"></div>
    <div id="stamp"></div>

    <button id="newBtn" aria-label="Get another quote">Read Another Quote ‚ò∫Ô∏è</button>

    <div id="attr">
      Quotes via <a href="https://api.quotable.io" target="_blank" rel="noopener">Quotable</a>
    </div>
  </div>

  <!-- ----------  JS  ---------- -->
  <script>
    const apiURL =
      "https://api.quotable.io/quotes/random?limit=1&tags=money|business|finance|success";

    /* ms until 00:01 tomorrow */
    const msUntilNextRefresh = () => {
      const now = new Date(), next = new Date(now);
      next.setHours(24,0,60,0);
      return next - now;
    };

    async function getQuote(){
      try{
        const res = await fetch(apiURL);
        if(!res.ok) throw new Error();
        const [q] = await res.json();
        return {q:q.content, a:q.author};
      }catch{
        return {
          q:"A budget is telling your money where to go instead of wondering where it went.",
          a:"Dave Ramsey (offline fallback)"
        };
      }
    }

    function showQuote({q,a}){
      text.textContent = "üí° " + q;
      author.textContent = "‚Äî " + a;
      stamp.textContent = "Shown for " +
        new Date().toLocaleDateString(undefined,
          {weekday:"long",year:"numeric",month:"long",day:"numeric"});
      card.style.animation = "none";
      requestAnimationFrame(()=>{card.style.animation="";});
    }

    async function renderDaily(){
      const today = new Date().toISOString().slice(0,10);
      const stored = JSON.parse(localStorage.getItem("finQuote")||"{}");
      let quote = stored;
      if(stored.date!==today || !stored.q){
        quote = await getQuote();
        localStorage.setItem("finQuote",JSON.stringify({...quote,date:today}));
      }
      showQuote(quote);
    }

    const card   = document.getElementById("card");
    const text   = document.getElementById("text");
    const author = document.getElementById("author");
    const stamp  = document.getElementById("stamp");
    const btn    = document.getElementById("newBtn");

    btn.addEventListener("click", async ()=>{
      btn.disabled = true;
      const quote = await getQuote();
      showQuote(quote);
      setTimeout(()=>btn.disabled=false,350);
    });

    renderDaily();
    setTimeout(()=>{renderDaily(); setInterval(renderDaily,86_400_000);},
                msUntilNextRefresh());
  </script>
</body>
</html>
