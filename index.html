<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Daily Financial-Wellness Quote</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <style>
    *,::before,::after{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    html{background:transparent !important;}
    body{
      background:transparent !important;
      display:flex;justify-content:center;align-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:#e6edf3;line-height:1.5;overflow:auto;padding:0;
    }
    #card{
      width:92vw;max-width:680px;margin:auto;
      background:#21262d;border-radius:18px;
      padding:clamp(1.4rem,4vw,2.2rem) clamp(1.2rem,4vw,2.6rem);
      box-shadow:
        0 1px 1px rgba(255,255,255,.05) inset,
        0 12px 28px rgba(0,0,0,.45),
        0  6px 14px rgba(0,0,0,.35);
      transform-style:preserve-3d;perspective:1000px;
      opacity:0;transform:rotateX(18deg) translateY(50px) scale(.94);
      animation:cardIn .9s cubic-bezier(.25,.8,.25,1) .15s forwards;
    }
    #text{font-size:clamp(1.25rem,2.5vw + .75rem,1.8rem);letter-spacing:.02em}
    #author{margin-top:1.1rem;font-weight:600;color:#58a6ff;font-size:1.05rem}
    #stamp {margin-top:.35rem;font-size:.85rem;color:#8b949e}
    #attr  {margin-top:1rem;font-size:.75rem;color:#8b949e}
    #attr  a{color:inherit;text-decoration:underline}
    #newBtn{
      margin-top:1.6rem;padding:.6rem 1.3rem;border:none;border-radius:12px;
      background:#58a6ff;color:#0d1117;font-size:1rem;font-weight:600;cursor:pointer;
      transition:transform .15s ease,box-shadow .15s ease;
      box-shadow:0 3px 6px rgba(0,0,0,.25);
    }
    #newBtn:active  {transform:scale(.97) translateY(1px)}
    #newBtn:disabled{opacity:.6;cursor:progress}
    @keyframes cardIn{to{opacity:1;transform:rotateX(0) translateY(0) scale(1);}}
  </style>
</head>

<body>
  <div id="card">
    <div id="text">Loading‚Ä¶</div>
    <div id="author"></div>
    <div id="stamp"></div>

    <!-- Button text now includes the smile emoji -->
    <button id="newBtn">Read Another Quote ‚ò∫Ô∏è</button>

    <div id="attr">
      Quotes via <a href="https://api.quotable.io" target="_blank" rel="noopener">Quotable</a>
    </div>
  </div>

  <script>
    /* Simpler endpoint, comma-separated tags */
    const ENDPOINT =
      "https://api.quotable.io/random?tags=money,business,finance,success";

    const msUntilTomorrow = () => {
      const n = new Date(), t = new Date(n);
      t.setHours(24,0,60,0);          // 00:01 tomorrow
      return t - n;
    };

    async function fetchQuote(){
      try{
        const r = await fetch(ENDPOINT,{cache:"no-store"});
        if(!r.ok) throw 0;
        const q = await r.json();
        return {q:q.content,a:q.author};
      }catch{
        return {
          q:"A budget is telling your money where to go instead of wondering where it went.",
          a:"Dave Ramsey (offline fallback)"
        };
      }
    }

    function display({q,a}){
      text.textContent = "üí° " + q;
      author.textContent = "‚Äî " + a;
      stamp.textContent = "Shown for " +
        new Date().toLocaleDateString(undefined,
          {weekday:"long",year:"numeric",month:"long",day:"numeric"});
      card.style.animation="none";requestAnimationFrame(()=>card.style.animation="");
    }

    async function renderDaily(){
      const today = new Date().toISOString().slice(0,10);
      const cache = JSON.parse(localStorage.getItem("finQuote")||"{}");
      let quote = cache;
      if(cache.date!==today || !cache.q){
        quote = await fetchQuote();
        localStorage.setItem("finQuote",JSON.stringify({...quote,date:today}));
      }
      display(quote);
    }

    /* refs */
    const card = document.getElementById("card"),
          text = document.getElementById("text"),
          author = document.getElementById("author"),
          stamp = document.getElementById("stamp"),
          btn = document.getElementById("newBtn");

    btn.addEventListener("click", async ()=>{
      btn.disabled = true;
      display(await fetchQuote());
      setTimeout(()=>btn.disabled=false,350);
    });

    renderDaily();
    setTimeout(()=>{renderDaily();setInterval(renderDaily,86_400_000);}, msUntilTomorrow());
  </script>
</body>
</html>
